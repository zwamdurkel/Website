!function(b,c,f,u){f.swipebox=function(o,e){var n,a,t={useCSS:!0,useSVG:!0,initialIndexOnArray:0,removeBarsOnMobile:!1,hideCloseButtonOnMobile:!1,hideBarsDelay:3e3,beforeOpen:null,afterOpen:null,afterClose:null,afterMedia:null,nextSlide:null,prevSlide:null,loopAtEnd:!1,queryStringData:{},toggleClassOnLoad:""},r=this,w=[],l=o.selector,i=navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)|(Android)|(PlayBook)|(BB10)|(BlackBerry)|(Opera Mini)|(IEMobile)|(webOS)|(MeeGo)/i),s=null!==i||c.createTouch!==u||"ontouchstart"in b||"onmsgesturechange"in b||navigator.msMaxTouchPoints,d=!!c.createElementNS&&!!c.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,g=b.innerWidth?b.innerWidth:f(b).width(),p=b.innerHeight?b.innerHeight:f(b).height(),x=0;r.settings={},f.swipebox.close=function(){n.closeSlide()},f.swipebox.extend=function(){return n},r.init=function(){r.settings=f.extend({},t,e),f.isArray(o)?(w=o,n.target=f(b),n.init(r.settings.initialIndexOnArray)):f(c).on("click",l,function(e){if("slide current"===e.target.parentNode.className)return!1;var t,i,s;f.isArray(o)||(n.destroy(),a=f(l),n.actions()),w=[],s||(i="data-rel",s=f(this).attr(i)),s||(i="rel",s=f(this).attr(i)),(a=s&&""!==s&&"nofollow"!==s?f(l).filter("["+i+'="'+s+'"]'):f(l)).each(function(){var e=null,t=null,i=null;f(this).attr("title")&&(e=f(this).attr("title")),f(this).attr("href")&&(t=f(this).attr("href")),f(this).attr("data-download")&&(i=f(this).attr("data-download")),w.push({href:t,title:e,download:i})}),t=a.index(f(this)),e.preventDefault(),e.stopPropagation(),n.target=f(e.target),n.init(t)})},n={init:function(e){r.settings.beforeOpen&&r.settings.beforeOpen(),this.target.trigger("swipebox-start"),f.swipebox.isOpen=!0,this.build(),this.openSlide(e),this.openMedia(e),this.preloadMedia(e+1),this.preloadMedia(e-1),r.settings.afterOpen&&r.settings.afterOpen(e)},build:function(){var e,t=this;f("body").append('<div id="swipebox-overlay">\t\t\t\t\t<div id="swipebox-container">\t\t\t\t\t\t<div id="swipebox-slider"></div>\t\t\t\t\t\t<div id="swipebox-top-bar">\t\t\t\t\t\t\t<div id="swipebox-title"></div>\t\t\t\t\t\t</div>\t\t\t\t\t\t<div id="swipebox-bottom-bar">\t\t\t\t\t\t\t<div id="swipebox-arrows">\t\t\t\t\t\t\t\t<a id="swipebox-prev"></a>\t\t\t\t\t\t\t\t<a id="swipebox-next"></a>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t</div>\t\t\t\t\t\t<a id="swipebox-download"></a>\t\t\t\t\t\t<a id="swipebox-close"></a>\t\t\t\t\t</div>\t\t\t</div>'),d&&!0===r.settings.useSVG&&(e=(e=f("#swipebox-close").css("background-image")).replace("png","svg"),f("#swipebox-prev, #swipebox-next, #swipebox-close").css({"background-image":e})),i&&r.settings.removeBarsOnMobile&&f("#swipebox-bottom-bar, #swipebox-top-bar").remove(),f.each(w,function(){f("#swipebox-slider").append('<div class="slide"></div>')}),t.setDim(),t.actions(),s&&t.gesture(),t.keyboard(),t.animBars(),t.resize()},setDim:function(){var e,t,i;"onorientationchange"in b?b.addEventListener("orientationchange",function(){0===b.orientation?(e=g,t=p):90!==b.orientation&&-90!==b.orientation||(e=p,t=g)},!1):(e=b.innerWidth?b.innerWidth:f(b).width(),t=b.innerHeight?b.innerHeight:f(b).height()),i={width:e,height:t},f("#swipebox-overlay").css(i)},resize:function(){var e=this;f(b).resize(function(){e.setDim()}).resize()},supportTransition:function(){var e,t="transition WebkitTransition MozTransition OTransition msTransition KhtmlTransition".split(" ");for(e=0;e<t.length;e++)if(c.createElement("div").style[t[e]]!==u)return t[e];return!1},doCssTrans:function(){if(r.settings.useCSS&&this.supportTransition())return!0},gesture:function(){var i,s,o,n,a,r,l=this,d=!1,p=!1,b={},c={},u=f("#swipebox-top-bar, #swipebox-bottom-bar"),h=f("#swipebox-slider");u.addClass("visible-bars"),l.setTimeout(),f("body").bind("touchstart",function(e){return f(this).addClass("touching"),i=f("#swipebox-slider .slide").index(f("#swipebox-slider .slide.current")),c=e.originalEvent.targetTouches[0],b.pageX=e.originalEvent.targetTouches[0].pageX,b.pageY=e.originalEvent.targetTouches[0].pageY,f("#swipebox-slider").css({"-webkit-transform":"translate3d("+x+"%, 0, 0)",transform:"translate3d("+x+"%, 0, 0)"}),f(".touching").bind("touchmove",function(e){if(e.preventDefault(),e.stopPropagation(),c=e.originalEvent.targetTouches[0],!p&&(a=o,o=c.pageY-b.pageY,50<=Math.abs(o)||d)){var t=.75-Math.abs(o)/h.height();h.css({top:o+"px"}),h.css({opacity:t}),d=!0}n=s,s=c.pageX-b.pageX,r=100*s/g,!p&&!d&&10<=Math.abs(s)&&(f("#swipebox-slider").css({"-webkit-transition":"",transition:""}),p=!0),p&&(0<s?0===i?f("#swipebox-overlay").addClass("leftSpringTouch"):(f("#swipebox-overlay").removeClass("leftSpringTouch").removeClass("rightSpringTouch"),f("#swipebox-slider").css({"-webkit-transform":"translate3d("+(x+r)+"%, 0, 0)",transform:"translate3d("+(x+r)+"%, 0, 0)"})):s<0&&(w.length===i+1?f("#swipebox-overlay").addClass("rightSpringTouch"):(f("#swipebox-overlay").removeClass("leftSpringTouch").removeClass("rightSpringTouch"),f("#swipebox-slider").css({"-webkit-transform":"translate3d("+(x+r)+"%, 0, 0)",transform:"translate3d("+(x+r)+"%, 0, 0)"}))))}),!1}).bind("touchend",function(e){if(e.preventDefault(),e.stopPropagation(),f("#swipebox-slider").css({"-webkit-transition":"-webkit-transform 0.4s ease",transition:"transform 0.4s ease"}),o=c.pageY-b.pageY,s=c.pageX-b.pageX,r=100*s/g,d)if(d=!1,100<=Math.abs(o)&&Math.abs(o)>Math.abs(a)){var t=0<o?h.height():-h.height();h.animate({top:t+"px",opacity:0},300,function(){l.closeSlide()})}else h.animate({top:0,opacity:1},300);else p?(p=!1,10<=s&&n<=s?l.getPrev():s<=-10&&s<=n&&l.getNext()):u.hasClass("visible-bars")?(l.clearTimeout(),l.hideBars()):(l.showBars(),l.setTimeout());f("#swipebox-slider").css({"-webkit-transform":"translate3d("+x+"%, 0, 0)",transform:"translate3d("+x+"%, 0, 0)"}),f("#swipebox-overlay").removeClass("leftSpringTouch").removeClass("rightSpringTouch"),f(".touching").off("touchmove").removeClass("touching")})},setTimeout:function(){if(0<r.settings.hideBarsDelay){var e=this;e.clearTimeout(),e.timeout=b.setTimeout(function(){e.hideBars()},r.settings.hideBarsDelay)}},clearTimeout:function(){b.clearTimeout(this.timeout),this.timeout=null},showBars:function(){var e=f("#swipebox-top-bar, #swipebox-bottom-bar");this.doCssTrans()?e.addClass("visible-bars"):(f("#swipebox-top-bar").animate({top:0},500),f("#swipebox-bottom-bar").animate({bottom:0},500),setTimeout(function(){e.addClass("visible-bars")},1e3))},hideBars:function(){var e=f("#swipebox-top-bar, #swipebox-bottom-bar");this.doCssTrans()?e.removeClass("visible-bars"):(f("#swipebox-top-bar").animate({top:"-50px"},500),f("#swipebox-bottom-bar").animate({bottom:"-50px"},500),setTimeout(function(){e.removeClass("visible-bars")},1e3))},animBars:function(){var e=this,t=f("#swipebox-top-bar, #swipebox-bottom-bar");t.addClass("visible-bars"),e.setTimeout(),f("#swipebox-slider").click(function(){t.hasClass("visible-bars")||(e.showBars(),e.setTimeout())}),f("#swipebox-bottom-bar").hover(function(){e.showBars(),t.addClass("visible-bars"),e.clearTimeout()},function(){0<r.settings.hideBarsDelay&&(t.removeClass("visible-bars"),e.setTimeout())})},keyboard:function(){var t=this;f(b).bind("keyup",function(e){e.preventDefault(),e.stopPropagation(),37===e.keyCode?t.getPrev():39===e.keyCode?t.getNext():27===e.keyCode&&t.closeSlide()})},actions:function(){var t=this,e="touchend click";w.length<2?(f("#swipebox-bottom-bar").hide(),u===w[1]&&f("#swipebox-top-bar").hide()):(f("#swipebox-prev").bind(e,function(e){e.preventDefault(),e.stopPropagation(),t.getPrev(),t.setTimeout()}),f("#swipebox-next").bind(e,function(e){e.preventDefault(),e.stopPropagation(),t.getNext(),t.setTimeout()})),f("#swipebox-close").bind(e,function(){t.closeSlide()}),f("#swipebox-download").bind(e,function(){t.download()})},setSlide:function(e,t){t=t||!1;var i=f("#swipebox-slider");x=100*-e,this.doCssTrans()?i.css({"-webkit-transform":"translate3d("+100*-e+"%, 0, 0)",transform:"translate3d("+100*-e+"%, 0, 0)"}):i.animate({left:100*-e+"%"}),f("#swipebox-slider .slide").removeClass("current"),f("#swipebox-slider .slide").eq(e).addClass("current"),this.setTitle(e),t&&i.fadeIn(),f("#swipebox-prev, #swipebox-next").removeClass("disabled"),0===e?f("#swipebox-prev").addClass("disabled"):e===w.length-1&&!0!==r.settings.loopAtEnd&&f("#swipebox-next").addClass("disabled")},openSlide:function(e){f("html").addClass("swipebox-html"),s?(f("html").addClass("swipebox-touch"),r.settings.hideCloseButtonOnMobile&&f("html").addClass("swipebox-no-close-button")):f("html").addClass("swipebox-no-touch"),f(b).trigger("resize"),this.setSlide(e,!0)},preloadMedia:function(e){var t=this;setTimeout(function(){t.openMedia(e)},1e3)},openMedia:function(e){var t,i;w[e]!==u&&(t=w[e].href);var s=f(c).width(),o=f(c).height();if(1.3<=b.devicePixelRatio&&(s*=2,o*=2),t+="&width="+s+"&height="+o,e<0||e>=w.length)return!1;(i=f("#swipebox-slider .slide").eq(e)).addClass("slide-loading"),this.loadMedia(t,function(){i.removeClass("slide-loading"),i.html(this),r.settings.afterMedia&&r.settings.afterMedia(e)})},setTitle:function(e){var t=null;f("#swipebox-title").empty(),w[e]!==u&&(t=w[e].title),t?(f("#swipebox-top-bar").show(),f("#swipebox-title").text(t)):f("#swipebox-top-bar").hide()},loadMedia:function(e,t){var i=f("<img>").on("load",function(){t.call(i)});i.attr("src",e)},download:function(){var e=f("#swipebox-slider .slide").index(f("#swipebox-slider .slide.current"));w[e].download&&(hasTerms?(n.closeSlide(),c.getElementById("termsDownBtn").href=w[e].download,FR.showEl("terms")):c.location.href=w[e].download)},getNext:function(){var e,t=this,i=f("#swipebox-slider .slide").index(f("#swipebox-slider .slide.current"));i+1<w.length?(e=f("#swipebox-slider .slide").eq(i).contents().find("iframe").attr("src"),f("#swipebox-slider .slide").eq(i).contents().find("iframe").attr("src",e),i++,t.setSlide(i),t.preloadMedia(i+1),r.settings.nextSlide&&r.settings.nextSlide(i)):!0===r.settings.loopAtEnd?(e=f("#swipebox-slider .slide").eq(i).contents().find("iframe").attr("src"),f("#swipebox-slider .slide").eq(i).contents().find("iframe").attr("src",e),i=0,t.preloadMedia(i),t.setSlide(i),t.preloadMedia(i+1),r.settings.nextSlide&&r.settings.nextSlide(i)):(f("#swipebox-overlay").addClass("rightSpring"),setTimeout(function(){f("#swipebox-overlay").removeClass("rightSpring")},500))},getPrev:function(){var e,t=f("#swipebox-slider .slide").index(f("#swipebox-slider .slide.current"));0<t?(e=f("#swipebox-slider .slide").eq(t).contents().find("iframe").attr("src"),f("#swipebox-slider .slide").eq(t).contents().find("iframe").attr("src",e),t--,this.setSlide(t),this.preloadMedia(t-1),r.settings.prevSlide&&r.settings.prevSlide(t)):(f("#swipebox-overlay").addClass("leftSpring"),setTimeout(function(){f("#swipebox-overlay").removeClass("leftSpring")},500))},nextSlide:function(e){},prevSlide:function(e){},closeSlide:function(){f("html").removeClass("swipebox-html"),f("html").removeClass("swipebox-touch"),f(b).trigger("resize"),this.destroy()},destroy:function(){f(b).unbind("keyup"),f("body").unbind("touchstart"),f("body").unbind("touchmove"),f("body").unbind("touchend"),f("#swipebox-slider").unbind(),f("#swipebox-overlay").remove(),f.isArray(o)||o.removeData("_swipebox"),this.target&&this.target.trigger("swipebox-destroy"),f.swipebox.isOpen=!1,r.settings.afterClose&&r.settings.afterClose()}},r.init()},f.fn.swipebox=function(e){if(!f.data(this,"_swipebox")){var t=new f.swipebox(this,e);this.data("_swipebox",t)}return this.data("_swipebox")}}(window,document,jQuery);